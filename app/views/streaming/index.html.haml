%h1 
  
  = title(@slide) 
  %meta{id: "slide_info", |
    "data-prefix" => prefix(@slide), |
    "data-suffix" => suffix(@slide), |
    "data-totalpage" => pages(@slide)}

.slide
  .main_player
    .header.primary_color
      #fullscreen_btn
    #player_container.player
      %img#current_slide{src: first_page(@slide)}
    .footer.primary_color
      .controls
        .prev.control_btn
        .next.control_btn
      .player_progress_container
        .player_progress{style: "width: #{100 / pages(@slide)}%;"}

= stylesheet_link_tag "slide"
= javascript_include_tag "streaming"
    
:javascript
  (function($) {
    $(document).ready(function() {
      var slideInfo = $("#slide_info");
      var slideImagePrefix = slideInfo.data("prefix");
      var slideImageSuffix = slideInfo.data("suffix");
      var slideImageNum = slideInfo.data("totalpage");

      player = new SlidePlayer(slideImagePrefix, slideImageSuffix, slideImageNum);
      player.preload();

      $(".next").on("click", function (e) { 
        player.next(); 
      })

      $(".prev").on("click", function (e) { 
        player.prev(); 
      })
    });
  })(jQuery); 
